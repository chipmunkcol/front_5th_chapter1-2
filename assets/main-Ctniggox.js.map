{"version":3,"file":"main-Ctniggox.js","sources":["../../src/lib/createRouter.js","../../src/main.jsx"],"sourcesContent":["import { createObserver } from \"./createObserver\";\r\n\r\nexport const createRouter = (routes) => {\r\n  const { subscribe, notify } = createObserver();\r\n\r\n  const getPath = () => window.location.pathname;\r\n\r\n  const getTarget = () => routes[getPath()];\r\n\r\n  const push = (path) => {\r\n    window.history.pushState(null, null, path);\r\n    notify();\r\n  };\r\n\r\n  window.addEventListener(\"popstate\", () => notify());\r\n\r\n  return {\r\n    get path() {\r\n      return getPath();\r\n    },\r\n    push,\r\n    subscribe,\r\n    getTarget,\r\n  };\r\n};\r\n","/** @jsx createVNode */\r\nimport { createRouter, createVNode } from \"./lib\";\r\nimport { HomePage, LoginPage, ProfilePage } from \"./pages\";\r\nimport { globalStore } from \"./stores\";\r\nimport { ForbiddenError, UnauthorizedError } from \"./errors\";\r\nimport { router } from \"./router\";\r\nimport { render } from \"./render\";\r\n\r\nrouter.set(\r\n  createRouter({\r\n    \"/\": HomePage,\r\n    \"/login\": () => {\r\n      const { loggedIn } = globalStore.getState();\r\n      if (loggedIn) {\r\n        throw new ForbiddenError();\r\n      }\r\n      return <LoginPage />;\r\n    },\r\n    \"/profile\": () => {\r\n      const { loggedIn } = globalStore.getState();\r\n      if (!loggedIn) {\r\n        throw new UnauthorizedError();\r\n      }\r\n      return <ProfilePage />;\r\n    },\r\n  }),\r\n);\r\n\r\nfunction main() {\r\n  router.get().subscribe(render);\r\n  globalStore.subscribe(render);\r\n\r\n  render();\r\n}\r\n\r\nmain();\r\n"],"names":["createRouter","routes","subscribe","notify","createObserver","getPath","getTarget","push","path","router","HomePage","loggedIn","globalStore","ForbiddenError","LoginPage","UnauthorizedError","ProfilePage","main","render"],"mappings":"wGAEO,MAAMA,EAAgBC,GAAW,CACtC,KAAM,CAAE,UAAAC,EAAW,OAAAC,CAAQ,EAAGC,EAAc,EAEtCC,EAAU,IAAM,OAAO,SAAS,SAEhCC,EAAY,IAAML,EAAOI,EAAS,CAAA,EAElCE,EAAQC,GAAS,CACrB,OAAO,QAAQ,UAAU,KAAM,KAAMA,CAAI,EACzCL,GACJ,EAEE,cAAO,iBAAiB,WAAY,IAAMA,EAAQ,CAAA,EAE3C,CACL,IAAI,MAAO,CACT,OAAOE,EAAO,CACf,EACD,KAAAE,EACA,UAAAL,EACA,UAAAI,CACJ,CACA,EChBAG,EAAO,IACLT,EAAa,CACX,IAAKU,EACL,SAAU,IAAM,CACd,KAAM,CAAE,SAAAC,CAAA,EAAaC,EAAY,SAAS,EAC1C,GAAID,EACF,MAAM,IAAIE,EAEZ,SAAQC,EAAU,IAAA,CACpB,EACA,WAAY,IAAM,CAChB,KAAM,CAAE,SAAAH,CAAA,EAAaC,EAAY,SAAS,EAC1C,GAAI,CAACD,EACH,MAAM,IAAII,EAEZ,SAAQC,EAAY,IAAA,CAAA,CAEvB,CAAA,CACH,EAEA,SAASC,GAAO,CACPR,EAAA,IAAA,EAAM,UAAUS,CAAM,EAC7BN,EAAY,UAAUM,CAAM,EAErBA,EAAA,CACT,CAEAD,EAAK"}