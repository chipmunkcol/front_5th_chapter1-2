{"version":3,"file":"hash-CHGNi9zP.js","sources":["../../src/lib/createHashRouter.js","../../src/main.hash.jsx"],"sourcesContent":["import { createObserver } from \"./createObserver\";\r\n\r\nexport const createHashRouter = (routes) => {\r\n  const { subscribe, notify } = createObserver();\r\n\r\n  // 현재 해시 경로를 가져오는 함수\r\n  const getPath = () => {\r\n    // 해시가 없으면 '/'를, 있으면 '#' 이후의 경로를 반환\r\n    return window.location.hash ? window.location.hash.slice(1) : \"/\";\r\n  };\r\n\r\n  const getTarget = () => routes[getPath()];\r\n\r\n  const push = (path) => {\r\n    window.location.hash = path;\r\n  };\r\n\r\n  // 해시 변경 이벤트 리스너\r\n  window.addEventListener(\"hashchange\", notify);\r\n\r\n  // 초기 로드 시 해시가 없는 경우를 처리\r\n  window.addEventListener(\"load\", () => {\r\n    if (!window.location.hash) {\r\n      push(\"/\");\r\n    }\r\n  });\r\n\r\n  return {\r\n    get path() {\r\n      return getPath();\r\n    },\r\n    push,\r\n    subscribe,\r\n    getTarget,\r\n  };\r\n};\r\n","/** @jsx createVNode */\r\nimport { createHashRouter, createVNode } from \"./lib\";\r\nimport { HomePage, LoginPage, ProfilePage } from \"./pages\";\r\nimport { globalStore } from \"./stores\";\r\nimport { ForbiddenError, UnauthorizedError } from \"./errors\";\r\nimport { router } from \"./router\";\r\nimport { render } from \"./render\";\r\n\r\nrouter.set(\r\n  createHashRouter({\r\n    \"/\": HomePage,\r\n    \"/login\": () => {\r\n      const { loggedIn } = globalStore.getState();\r\n      if (loggedIn) {\r\n        throw new ForbiddenError();\r\n      }\r\n      return <LoginPage />;\r\n    },\r\n    \"/profile\": () => {\r\n      const { loggedIn } = globalStore.getState();\r\n      if (!loggedIn) {\r\n        throw new UnauthorizedError();\r\n      }\r\n      return <ProfilePage />;\r\n    },\r\n  }),\r\n);\r\n\r\nfunction main() {\r\n  router.get().subscribe(render);\r\n  globalStore.subscribe(render);\r\n\r\n  render();\r\n}\r\n\r\nmain();\r\n"],"names":["createHashRouter","routes","subscribe","notify","createObserver","getPath","getTarget","push","path","router","HomePage","loggedIn","globalStore","ForbiddenError","LoginPage","UnauthorizedError","ProfilePage","main","render"],"mappings":"wGAEO,MAAMA,EAAoBC,GAAW,CAC1C,KAAM,CAAE,UAAAC,EAAW,OAAAC,CAAQ,EAAGC,EAAc,EAGtCC,EAAU,IAEP,OAAO,SAAS,KAAO,OAAO,SAAS,KAAK,MAAM,CAAC,EAAI,IAG1DC,EAAY,IAAML,EAAOI,EAAS,CAAA,EAElCE,EAAQC,GAAS,CACrB,OAAO,SAAS,KAAOA,CAC3B,EAGE,cAAO,iBAAiB,aAAcL,CAAM,EAG5C,OAAO,iBAAiB,OAAQ,IAAM,CAC/B,OAAO,SAAS,MACnBI,EAAK,GAAG,CAEd,CAAG,EAEM,CACL,IAAI,MAAO,CACT,OAAOF,EAAO,CACf,EACD,KAAAE,EACA,UAAAL,EACA,UAAAI,CACJ,CACA,EC3BAG,EAAO,IACLT,EAAiB,CACf,IAAKU,EACL,SAAU,IAAM,CACd,KAAM,CAAE,SAAAC,CAAA,EAAaC,EAAY,SAAS,EAC1C,GAAID,EACF,MAAM,IAAIE,EAEZ,SAAQC,EAAU,IAAA,CACpB,EACA,WAAY,IAAM,CAChB,KAAM,CAAE,SAAAH,CAAA,EAAaC,EAAY,SAAS,EAC1C,GAAI,CAACD,EACH,MAAM,IAAII,EAEZ,SAAQC,EAAY,IAAA,CAAA,CAEvB,CAAA,CACH,EAEA,SAASC,GAAO,CACPR,EAAA,IAAA,EAAM,UAAUS,CAAM,EAC7BN,EAAY,UAAUM,CAAM,EAErBA,EAAA,CACT,CAEAD,EAAK"}